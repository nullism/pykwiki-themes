{% macro link(l) %}
    <li>
    {% if l.href %}
        <a href="{{l.href}}" {% if l.target %}target="{{l.target}}"{% endif %}>{{l.label}}</a>
    {% else %}
        <b>{{l.label}}</b>
    {% endif %}

    {% if l.children %}
        <ul>
        {% for l2 in l.children %}
            {{ link(l2) }}
        {% endfor %}
        </ul>
    {% endif %}
    </li>
{%- endmacro %}

<ul>
{% for l in links %}
    {{ link(l) }} 
{% endfor %}
</ul>
